window.VideoCocoon=function(a){return a.players={},a.url=function(e,t){(t=document.createElement("a")).href=e;for(var r="origin protocol hostname host pathname port search hash href username password".split(" "),n={},o=0;o<r.length;o++)n[r[o]]=t[r[o]];return n},a.serialize=function(e){var t=[],r=encodeURIComponent;for(var n in e)e.hasOwnProperty(n)&&t.push(r(n)+"="+r(e[n]));return t.join("&")},a.extend=function(){for(var e={},t=0;t<arguments.length;t++)for(var r in arguments[t])arguments[t].hasOwnProperty(r)&&(e[r]=arguments[t][r].constructor===Object?a.extend(e[r]||{},arguments[t][r]):arguments[t][r]);return e},a.attr=function(e,t,r){return r=document.createAttribute(e),t&&(r.value=t),r},a.getPlayer=function(e){return this.players[e]||{}},a.getApi=function(e,t,r,n,o){if(t=a.getPlayer(e),(r=a.providers[t.type]).api)if(o=function(){t.trigger("onApiLoaded"),r.setPlayer(e)},"function"==typeof define&&define.amd&&r.amd&&r.export)require([r.api],function(e){window[r.export]=e,o()});else{if(document.getElementById(t.type+"VCApi"))return o();(n=document.createElement("script")).id=t.type+"VCApi",n.onload=o,n.src=r.api,document.getElementsByTagName("script")[0].parentNode.appendChild(n)}},a.getSrc=function(e){if(void 0===a.getPlayer(e).src)switch(!0){case!!a.getPlayer(e).options.src:a.getPlayer(e).src=a.getPlayer(e).options.src.trim();break;case a.getTarget(e).hasAttribute("data-src"):a.getPlayer(e).src=a.getTarget(e).getAttribute("data-src").trim()}return a.getPlayer(e).src||!1},a.getElement=function(e,t){return e&&(e=e instanceof Node&&1===e.nodeType?e:document.querySelector(e)),e||t},a.getTarget=function(e){return a.getElement(a.getPlayer(e).options.target,document.body)},a.getFrame=function(e,t){return void 0===a.getPlayer(e).frame&&((t=document.createElement("iframe")).src=a.providers[a.getPlayer(e).type].getUrl(e)||"",t.id=e,t.className=a.getPlayer(e).options.class.frame||null,t.setAttributeNode(a.attr("allowfullscreen")),t.setAttributeNode(a.attr("mozallowfullscreen")),t.setAttributeNode(a.attr("webkitallowfullscreen")),t.setAttributeNode(a.attr("oallowfullscreen")),t.setAttributeNode(a.attr("msallowfullscreen")),a.getPlayer(e).frame=t),a.getPlayer(e).frame||!1},a.embed=function(e){a.getTarget(e).appendChild(a.getFrame(e)),a.trigger("onFrameEmbed",e),a.getApi(e)},a.unique=function(){return"vc-"+Math.random().toString(36).substr(2,9)},a.trigger=function(e,t,r){for(var n in(r=a.getPlayer(t||this.uid)).events=r.events||{},r.events[e]||[])r.events[e][n].call(r)},a.on=function(e,t,r,n){return(n=a.getPlayer(r||this.uid)).events[e]=n.events[e]||[],n.events[e].push(t),n},a.init=function(e,t){for(var r in t=a.unique(),a.players[t]={uid:t,options:a.extend({params:{},class:{},events:e.events||{}},e),trigger:a.trigger,on:a.on,events:{}},a.getPlayer(t).options.events)a.on(r,a.getPlayer(t).options.events[r],t);for(var r in a.providers)if(a.providers[r].pattern[0].test(a.getSrc(t)))return a.getPlayer(t).type=r,a.embed(t),a.trigger("onPlayerInitialized"),a.getPlayer(t);return!1},a}(window.VideoCocoon||{});